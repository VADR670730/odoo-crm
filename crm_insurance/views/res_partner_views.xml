<?xml version="1.0"?>
<odoo>
  <record id="res_partner_view_search_inherit_taxid" model="ir.ui.view">
    <field name="name">res.partner.view.search.inherit.taxid</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_res_partner_filter" />
    <field name="arch" type="xml">
      <filter name="inactive" position="before">
        <separator />
        <field name="vat" />
        <filter string="Tax ID" name="vat" domain="[('is_company','=',True)]"/>
        <field name="personnumber" />
        <filter string="Person Number" name="personnumber" domain="[('is_company','=',False)]"/>
        <field name="city" />
        <filter string="City" name="city" domain="[('is_company','=',True)]"/>
      </filter>
    </field>
  </record>
  
  <record id="res_partner_view_tree_inherit_menu" model="ir.ui.view">
    <field name="name">res.partner.view.tree.inherit.menu</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_tree" />
    <field name="arch" type="xml">
      <field name="display_name" position="before">
        <field name="company_type" />
      </field>
      <field name="phone" position="before" >
        <field name="org_prn"  />
        <field name="city" />
      </field>
    </field>
  </record>
  
  <record id="view_partners_form_crm_insurance" model="ir.ui.view">
    <field name="name">view.res.partner.form.crm.insurance.inherited</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form" />
    <field name="arch" type="xml">
      <field name="vat" position="before">
        <field name="personnumber" placeholder="10 or 12 digital" attrs="{'invisible': [('company_type', '=', 'company')]}" />
      </field>
      <field name="lang" position="after">
        <field name="membership_ids" widget="many2many_tags" placeholder="MembershipID" />
      </field>
      <div name="button_box" position="inside">
        <button class="oe_stat_button" name="company_button" type="object" icon="fa-group" context="{'partner_id': active_id, 'partner_name': name}" attrs="{'invisible': [('is_company', '!=', True)]}">
          <field name="count_company" widget="statinfo" />
        </button>
        <button class="oe_stat_button" name="accommodator_button" type="object" icon="fa-group" context="{'partner_id': active_id, 'partner_name': name}" attrs="{'invisible': [('company_type', '!=', 'company')]}">
          <field name="count_accommodator" widget="statinfo" />
        </button>
        <button class="oe_stat_button" name="life_insurance_button" type="object" icon="fa-group" context="{'partner_id': active_id, 'partner_name': name}" attrs="{'invisible': [('company_type', '!=', 'company')]}">
          <field name="count_life_insurance" widget="statinfo" />
        </button>
        <button class="oe_stat_button" name="property_insurance_button" type="object" icon="fa-group" context="{'partner_id': active_id, 'partner_name': name}" attrs="{'invisible': [('company_type', '!=', 'company')]}">
          <field name="count_property_insurance" widget="statinfo" />
        </button>
      </div>
      <notebook position="inside">
        <page string="Accommodator" attrs="{'invisible': [('company_type', '=', 'company')]}">
          <group>
            <field name="is_accommodator" />
          </group>
        </page>
        <page string="Liability Insurance" attrs="{'invisible': [('company_type', '=', 'company')]}">
          <group>
            <field name="have_life_insurance" />
            <field name="have_property_insurance" />
          </group>
        </page>
        <page string="Company" attrs="{'invisible': [('company_type', '!=', 'company')]}">
          <group>
            <field name="is_fellowship" />
          </group>
        </page>
        <!--
             <page string="Fellowship" attrs="{'invisible': [('company_type', '!=', 'fellowship')]}">
        -->
        <!--
             <group>
        -->
        <!--
             <field name="have_liability_insurance"/>
        -->
        <!--
             </group>
        -->
        <!--
             </page>
        -->
        <!--
             <page string="Accommodator" attrs="{'invisible': [('company_type', '!=', 'accommodator')]}">
        -->
        <!--
             <group>
        -->
        <!--
             <field name="have_liability_insurance"/>
        -->
        <!--
             </group>
        -->
        <!--
             </page>
        -->
      </notebook>
    </field>
  </record>
  
  <record id="action_fellowship_form" model="ir.actions.act_window">
    <field name="name">Fellowship</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="domain">[("is_fellowship","=", True),("is_company","=",True)]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="search_view_id" ref="base.view_res_partner_filter"/>
  </record>
  
  <record id="action_accommodator_form" model="ir.actions.act_window">
    <field name="name">Accommodator</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="domain">[("is_accommodator","=", True),("is_company","=",False)]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="search_view_id" ref="base.view_res_partner_filter"/>
  </record>
  
  <record id="action_company_form" model="ir.actions.act_window">
    <field name="name">Company</field>
    <field name="res_model">res.partner</field>
    <field name="view_type">form</field>
    <field name="view_mode">kanban,tree,form</field>
    <field name="domain">[("is_company","=", True)]</field>
    <field name="view_id" ref="base.res_partner_kanban_view" />
    <field name="search_view_id" ref="base.view_res_partner_filter"/>
  </record>
  
  <menuitem
        id="crm_menu_membership"
        name="Membership"
        parent="crm.crm_menu_root"
        sequence="0"/>
        
  <menuitem id="res_partner_menu_fellowship"
        name="Fellowship"
        parent="crm_menu_membership"
        action="action_fellowship_form"
        sequence="1"/>
        
  <menuitem id="res_partner_menu_accommodator"
        name="Accommodator"
        parent="crm_menu_membership"
        action="action_accommodator_form"
        sequence="2"/>
        
  <menuitem id="res_partner_menu_company"
        name="Company"
        parent="crm_menu_membership"
        action="action_company_form"
        sequence="3"/>
        
  


</odoo>
